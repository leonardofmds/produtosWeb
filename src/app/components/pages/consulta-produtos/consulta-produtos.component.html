<div class="container mt-4">
    <div class="card shadow p-4">
      <h5 class="card-title">Consulta de produtos</h5>

      <form [formGroup]="form" (ngSubmit)="onSubmit()">

        <div class="mb-3">
          <label for="consultaNome" class="form-label">Nome do Produto</label>
          <input formControlName="nome" type="text" class="form-control" id="consultaNome" placeholder="Digite o nome do produto">

          <span class="text-danger" *ngIf="f['nome'].touched && f['nome'].invalid">
            <span *ngIf="f['nome']?.hasError('required')">Por favor informe o nome do produto</span>
            <span *ngIf="f['nome']?.hasError('minlength')">Por favor informe o nome do produto com pelo menos 3 caracteres</span>
          </span>
          
        </div>
        <button [disabled]="form.invalid" type="submit" class="btn btn-primary">Pesquisar</button>
      </form>

    </div>

    <div *ngIf="mensagem" class="mt-4 alert alert-success alert-dismissible fade show" role="alert">
      <strong> {{ mensagem }} </strong>
      <button (click)="mensagem = ''" type="button" class="btn-close" aria-label="Close"></button>
    </div>

    <div *ngIf="produtos.length > 0" class="card shadow p-4 mt-4">
      <h5 class="card-title">Listagem de Produtos</h5>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Preço</th>
            <th>Quantidade</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let produto of produtos">
            <td>{{ produto.nome }}</td>
            <td>{{ produto.preco }}</td>
            <td>{{ produto.quantidade }}</td>
            <td>
              <button class="btn btn-primary btn-sm me-1">Alterar</button>
              <button class="btn btn-danger btn-sm">Excluir</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>  